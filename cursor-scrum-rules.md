# CursorAI UserRules - スクラム開発ルール

## 🎯 基本原則

### スクラム開発フロー遵守
- 全ての開発作業はスプリント単位で管理する
- PBI（プロダクトバックログアイテム）ベースでタスクを分解する
- 完了の定義（Definition of Done）を常に意識する
- デイリースタンドアップの3つの質問に答えられる状態を維持する

### ドキュメント構造の活用
- `docs/` フォルダ内の構造に従ってドキュメントを管理する
- テンプレートファイルを必ず使用する
- 進捗は指定されたフォーマットで記録する

## 📋 コード開発ルール

### PBIベース開発
```
新機能開発時は以下の手順を必ず実行：
1. 対応するPBIファイル（docs/product-backlog/PBI-XXX_機能名.md）を確認
2. 受け入れ基準をコメントとしてコードに記載
3. PBI IDをコミットメッセージに含める（例：[PBI-001] ユーザー認証機能を実装）
4. 完了時はPBIファイルのステータスを更新
```

### コード品質基準
```
- 全ての関数・クラスにドキュメンテーションコメントを記載
- テストカバレッジ80%以上を維持
- リファクタリング時は技術的負債の削減を意識
- セキュリティ要件は受け入れ基準に基づいて実装
```

### ブランチ戦略
```
- ブランチ名：feature/PBI-XXX-機能名
- プルリクエスト名：[PBI-XXX] 機能名の実装
- レビュー必須：最低1名のレビューを必要とする
- マージ前：全テストの成功を確認
```

## 🤖 AIエージェント連携ルール

### 開発エージェント活用
```
コード生成時：
- PBIの受け入れ基準を満たすコードを生成
- エラーハンドリングとログ出力を含める
- テストコードも同時に生成
- docs/ai-agents/agent-logs/ にログを記録
```

### テストエージェント活用
```
テスト実行時：
- 単体テスト、統合テスト、E2Eテストを自動実行
- テスト結果をdocs/metrics/ に記録
- 失敗時は詳細なエラー情報を提供
- カバレッジレポートを自動生成
```

### ドキュメントエージェント活用
```
ドキュメント更新時：
- API仕様書の自動生成・更新
- README.mdの自動更新
- 進捗ダッシュボードの自動更新
- 変更履歴の自動記録
```

## 📊 進捗管理ルール

### デイリー進捗更新
```
毎日18:00に以下を自動実行：
1. 完了タスクの集計
2. バーンダウンチャートの更新（docs/burndown-charts/sprint-XX/）
3. 進捗ダッシュボードの生成（templates/progress-dashboard-template.md使用）
4. リスク分析とアラート生成
```

### スプリント管理
```
スプリント開始時：
- docs/sprints/sprint-XX/ フォルダを作成
- sprint-goal.mdを作成・更新
- チームベロシティを計算
- AIエージェントのタスク割り当てを実行

スプリント終了時：
- スプリントレビュー資料を自動生成
- ベロシティを記録（docs/velocity-tracking/）
- 振り返り項目を整理
- 次スプリントの計画支援
```

## 🚨 品質・リスク管理ルール

### 自動品質チェック
```
コミット時に実行：
- コード品質スキャン（SonarQube等）
- セキュリティ脆弱性チェック
- パフォーマンステスト
- ドキュメント整合性チェック
```

### リスク検出・アラート
```
以下の条件でアラートを発生：
- バーンダウンが理想線から20%以上乖離
- テストカバレッジが80%を下回る
- ビルド失敗が3回連続
- PBIの完了予定日を過ぎている
```

## 📝 コミュニケーションルール

### デイリースタンドアップ支援
```
毎朝9:00に以下を準備：
1. 昨日の完了タスク一覧
2. 今日の予定タスク一覧
3. ブロッカー・課題の特定
4. AIエージェントの実行結果サマリー
5. templates/daily-standup-template.mdを使用してレポート生成
```

### ステークホルダー報告
```
週次で以下を自動生成：
- 進捗サマリーレポート
- 品質メトリクスレポート
- リスク・課題一覧
- 次週の計画概要
```

## 🔄 自動化ワークフロー

### 継続的インテグレーション
```yaml
# 例：GitHub Actions設定
on: [push, pull_request]
jobs:
  scrum-workflow:
    steps:
      - name: PBI Status Update
        run: python docs/automation/update-pbi-status.py
      - name: Generate Progress Report
        run: python docs/automation/generate-progress.py
      - name: Update Burndown Chart
        run: python docs/automation/update-burndown.py
```

### 定期実行タスク
```
毎日：
- 進捗データ収集・更新
- バーンダウンチャート生成
- AIエージェントログ分析

毎週：
- ベロシティ計算
- 品質メトリクス集計
- リスク分析レポート

毎スプリント：
- スプリントレビュー資料生成
- 振り返り項目整理
- 次スプリント計画支援
```

## 🎯 完了の定義（Definition of Done）

### 機能開発完了基準
```
✅ 受け入れ基準を全て満たしている
✅ 単体テスト・統合テストが成功している
✅ コードレビューが完了している
✅ ドキュメントが更新されている
✅ セキュリティチェックが完了している
✅ パフォーマンステストが完了している
✅ PBIステータスが「Done」に更新されている
```

### スプリント完了基準
```
✅ 全PBIが完了基準を満たしている
✅ スプリントゴールが達成されている
✅ デモ準備が完了している
✅ ドキュメントが最新化されている
✅ 次スプリントの準備が完了している
✅ 振り返り項目が整理されている
```

## 🔧 設定・カスタマイズ

### プロジェクト固有設定
```
# プロジェクト設定ファイル：docs/ai-agents/project-config.yaml
project_name: "TestProject"
sprint_length: 14  # 日数
team_size: 5
velocity_target: 50  # ストーリーポイント
quality_threshold: 0.8
automation_level: "high"  # low/medium/high
```

### AIエージェント設定
```
# 各エージェントの設定は docs/ai-agents/agent-configs/ で管理
# 実行頻度、品質基準、出力形式等をカスタマイズ可能
```

---

## 📚 参考資料

- スクラムガイド：https://scrumguides.org/
- プロジェクトドキュメント：docs/README.md
- テンプレート集：docs/templates/
- AIエージェント設定：docs/ai-agents/README.md

---
**作成日**: 2024-01-XX  
**バージョン**: 1.0  
**適用プロジェクト**: TestProject 